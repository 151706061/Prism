parameters:
  publishTestResults: false

steps:
- task: VSTest@2
  displayName: Test Prism.WPF
  inputs:
    publishRunAttachments: false
    codeCoverageEnabled: true
    rerunFailedTests: true
    testAssemblyVer2: |
     $(System.DefaultWorkingDirectory)\tests\Wpf\**\*test*.dll
     !**/obj/*

    platform: '$(BuildPlatform)'
    configuration: '$(BuildConfiguration)'

- ${{ if eq(parameters.publishTestResults, true) }}:
  - template: publish-vstest-results.yml
    parameters:
      testRunTitle: Prism.WPF
      testResultsFiles: '$(System.DefaultWorkingDirectory)/tests/Prism.Core.Tests/TestResults/*.trx'